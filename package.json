{
	"name": "obsidian",
	"private": true,
	"version": "0.0.0",
	"type": "module",
	"scripts": {
		"dev": "vite",
		"build": "tsc -b && vite build",
		"lint": "eslint .",
		"preview": "vite preview",
		"server": "nodemon --exec tsx node/src/server.ts",
		"build:server": "tsc -p tsconfig.server.json"
	},
	"dependencies": {
		"@supabase/supabase-js": "^2.86.2",
		"@tailwindcss/vite": "^4.1.17",
		"dotenv": "^17.2.3",
		"express": "^5.1.0",
		"gen": "^1.6.0",
		"nodemon": "^3.1.11",
		"pg": "^8.16.3",
		"react": "^19.2.0",
		"react-dom": "^19.2.0",
		"tailwindcss": "^4.1.17"
	},
	"devDependencies": {
		"@eslint/js": "^9.39.1",
		"@types/express": "^5.0.5",
		"@types/node": "^24.10.3",
		"@types/pg": "^8.16.0",
		"@types/react": "^19.2.2",
		"@types/react-dom": "^19.2.2",
		"@vitejs/plugin-react": "^5.1.0",
		"eslint": "^9.39.1",
		"eslint-config-prettier": "^10.1.8",
		"eslint-plugin-react-hooks": "^7.0.1",
		"eslint-plugin-react-refresh": "^0.4.24",
		"globals": "^16.5.0",
		"prettier": "3.6.2",
		"supabase": "^2.65.6",
		"ts-node": "^10.9.2",
		"tsx": "^4.20.6",
		"typescript": "~5.9.3",
		"typescript-eslint": "^8.46.3",
		"vite": "^7.2.2"
	},
	"Transform": "AWS::Serverless-2016-10-31",
	"Resources": {
		"Api": {
			"Type": "AWS::Serverless::Api",
			"Properties": {
				"Name": {
					"Fn::Sub": [
						"${ResourceName} From Stack ${AWS::StackName}",
						{
							"ResourceName": "Api"
						}
					]
				},
				"StageName": "Prod",
				"DefinitionBody": {
					"openapi": "3.0",
					"info": {},
					"paths": {
						"/": {
							"get": {
								"responses": {}
							}
						}
					}
				},
				"EndpointConfiguration": "REGIONAL",
				"TracingEnabled": true
			}
		},
		"Table": {
			"Type": "AWS::DynamoDB::Table",
			"Properties": {
				"AttributeDefinitions": [
					{
						"AttributeName": "id",
						"AttributeType": "S"
					}
				],
				"BillingMode": "PAY_PER_REQUEST",
				"KeySchema": [
					{
						"AttributeName": "id",
						"KeyType": "HASH"
					}
				],
				"StreamSpecification": {
					"StreamViewType": "NEW_AND_OLD_IMAGES"
				}
			}
		},
		"UserPool": {
			"Type": "AWS::Cognito::UserPool",
			"Properties": {
				"AdminCreateUserConfig": {
					"AllowAdminCreateUserOnly": false
				},
				"AliasAttributes": [
					"email",
					"preferred_username"
				],
				"UserPoolName": {
					"Fn::Sub": "${AWS::StackName}-UserPool"
				}
			}
		},
		"Function": {
			"Type": "AWS::Serverless::Function",
			"Properties": {
				"Description": {
					"Fn::Sub": [
						"Stack ${AWS::StackName} Function ${ResourceName}",
						{
							"ResourceName": "Function"
						}
					]
				},
				"CodeUri": "src/Function",
				"Handler": "index.handler",
				"Runtime": "nodejs22.x",
				"MemorySize": 3008,
				"Timeout": 30,
				"Tracing": "Active"
			}
		},
		"FunctionLogGroup": {
			"Type": "AWS::Logs::LogGroup",
			"DeletionPolicy": "Retain",
			"Properties": {
				"LogGroupName": {
					"Fn::Sub": "/aws/lambda/${Function}"
				}
			}
		},
		"Layer": {
			"Type": "AWS::Serverless::LayerVersion",
			"Properties": {
				"Description": {
					"Fn::Sub": [
						"Stack ${AWS::StackName} Layer ${ResourceName}",
						{
							"ResourceName": "Layer"
						}
					]
				},
				"ContentUri": "src/Layer",
				"RetentionPolicy": "Retain"
			}
		},
		"Function2": {
			"Type": "AWS::Serverless::Function",
			"Properties": {
				"Description": {
					"Fn::Sub": [
						"Stack ${AWS::StackName} Function ${ResourceName}",
						{
							"ResourceName": "Function2"
						}
					]
				},
				"CodeUri": "src/Function2",
				"Handler": "index.handler",
				"Runtime": "nodejs22.x",
				"MemorySize": 3008,
				"Timeout": 30,
				"Tracing": "Active"
			}
		},
		"Function2LogGroup": {
			"Type": "AWS::Logs::LogGroup",
			"DeletionPolicy": "Retain",
			"Properties": {
				"LogGroupName": {
					"Fn::Sub": "/aws/lambda/${Function2}"
				}
			}
		},
		"Bucket": {
			"Type": "AWS::S3::Bucket",
			"Properties": {
				"BucketName": {
					"Fn::Sub": "${AWS::StackName}-bucket-${AWS::AccountId}"
				},
				"BucketEncryption": {
					"ServerSideEncryptionConfiguration": [
						{
							"ServerSideEncryptionByDefault": {
								"SSEAlgorithm": "aws:kms",
								"KMSMasterKeyID": "alias/aws/s3"
							}
						}
					]
				},
				"PublicAccessBlockConfiguration": {
					"IgnorePublicAcls": true,
					"RestrictPublicBuckets": true
				}
			}
		},
		"BucketBucketPolicy": {
			"Type": "AWS::S3::BucketPolicy",
			"Properties": {
				"Bucket": {
					"Ref": "Bucket"
				},
				"PolicyDocument": {
					"Id": "RequireEncryptionInTransit",
					"Version": "2012-10-17",
					"Statement": [
						{
							"Principal": "*",
							"Action": "*",
							"Effect": "Deny",
							"Resource": [
								{
									"Fn::GetAtt": [
										"Bucket",
										"Arn"
									]
								},
								{
									"Fn::Sub": "${Bucket.Arn}/*"
								}
							],
							"Condition": {
								"Bool": {
									"aws:SecureTransport": "false"
								}
							}
						}
					]
				}
			}
		}
	}
}
